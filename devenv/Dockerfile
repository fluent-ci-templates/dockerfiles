# Do not edit this file directly. It is generated by FluentDocker.

FROM alpine:latest
RUN apk update
RUN apk add curl bash python3 alpine-sdk
RUN curl --proto =https --tlsv1.2 -sSf -L https://install.determinate.systems/nix | sh -s -- install linux --extra-conf "sandbox = false" --init none --no-confirm
ENV PATH=${PATH}:/nix/var/nix/profiles/default/bin
RUN sed -i 's/auto-allocate-uids = true/auto-allocate-uids = false/g' /etc/nix/nix.conf
RUN adduser --disabled-password devenv
RUN addgroup devenv nixbld
ENV USER=root
RUN echo "trusted-users = root $USER" | tee -a /etc/nix/nix.conf
RUN nix profile install --accept-flake-config github:cachix/cachix
RUN cachix use devenv
RUN nix profile install --accept-flake-config github:cachix/devenv/latest
CMD devenv version
