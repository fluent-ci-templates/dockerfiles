# Do not edit this file directly. It is generated by FluentDocker.

FROM alpine:latest
RUN apk update
RUN apk add bash curl openjdk11 wget unzip git libstdc++ zlib gcompat
RUN curl --proto =https --tlsv1.2 -sSf -L https://install.determinate.systems/nix | sh -s -- install linux --extra-conf "sandbox = false" --init none --no-confirm
ENV PATH=${PATH}:/nix/var/nix/profiles/default/bin
RUN sed -i 's/auto-allocate-uids = true/auto-allocate-uids = false/g' /etc/nix/nix.conf
RUN adduser --disabled-password devbox
RUN addgroup devbox nixbld
ENV FORCE=1
RUN curl -fsSL https://get.jetpack.io/devbox | bash
ENV ANDROID_HOME=/root/android-sdk
RUN mkdir -p $ANDROID_HOME && wget --output-document=$ANDROID_HOME/cmdline-tools.zip https://dl.google.com/android/repository/commandlinetools-linux-9477386_latest.zip
RUN cd $ANDROID_HOME && rm -rf cmdline-tools && unzip -d cmdline-tools cmdline-tools.zip && mv cmdline-tools/cmdline-tools cmdline-tools/latest
ENV PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin
RUN sdkmanager --version
RUN sdkmanager "platforms;android-33"
RUN yes | sdkmanager --licenses
CMD devbox version
